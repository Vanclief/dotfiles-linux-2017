#| |  / /   |  / | / / ____/ /   /  _/ ____/ ____/
#| | / / /| | /  |/ / /   / /    / // __/ / /_
#| |/ / ___ |/ /|  / /___/ /____/ // /___/ __/
#|___/_/  |_/_/ |_/\____/_____/___/_____/_/
#
# repo  : https://github.com/vanclief/dotfiles/
# i3 config file (v4)
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
font pango:Inconsolata Medium 11, DejaVu Sans Mono 10

# Movement Keys Vim Style
set $up k
set $down j
set $left h
set $right l

# Set mod key (Mod1=<Alt>, Mod4=<Super>)
set $mod Mod4

# Configure border style <normal|1pixel|pixel xx|none|pixel>
new_window pixel 2
new_float pixel 2

# Hide borders
hide_edge_borders none

# use Mouse+Mod1 to drag floating windows to their wanted position
floating_modifier Mod1

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal

# kill focused window
bindsym $mod+Shift+q kill

# lock screen
bindsym $mod+Ctrl+l exec i3lock -c 000000

# start dmenu (a program launcher)
# bindsym $mod+d exec dmenu_run
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

# change focus
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+Shift+v split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# move the currently focused window to the scratchpad
bindsym $mod+Shift+minus move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mod+minus scratchpad show

# switch to workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9

# reload the configuration file
bindsym $mod+Shift+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# Set shutdown, restart and locking features
bindsym $mod+0 mode "$mode_system"
set $mode_system (l)ock, (e)xit, switch_(u)ser, (s)uspend, (h)ibernate, (r)eboot, (Shift+s)hutdown
mode "$mode_system" {
    bindsym l exec --no-startup-id i3exit lock, mode "default"
    bindsym s exec --no-startup-id i3exit suspend, mode "default"
    bindsym u exec --no-startup-id i3exit switch_user, mode "default"
    bindsym e exec --no-startup-id i3exit logout, mode "default"
    bindsym h exec --no-startup-id i3exit hibernate, mode "default"
    bindsym r exec --no-startup-id i3exit reboot, mode "default"
    bindsym Shift+s exec --no-startup-id i3exit shutdown, mode "default"

    # exit system mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Make screenshot and copy to clipboard
bindsym $mod+Print --release exec "scrot -s ~/screen.png && xclip -selection clipboard -t image/png -i ~/screen.png"

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym $left       resize shrink width 5 px or 5 ppt
        bindsym $down       resize grow height 5 px or 5 ppt
        bindsym $up         resize shrink height 5 px or 5 ppt
        bindsym $right      resize grow width 5 px or 5 ppt

        # same bindings, but for the arrow keys
        bindsym Left        resize shrink width 5 px or 5 ppt
        bindsym Down        resize grow height 5 px or 5 ppt
        bindsym Up          resize shrink height 5 px or 5 ppt
        bindsym Right       resize grow width 5 px or 5 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
        status_command i3status
}

# Open program mode press $mod+o followed by
set $mode_launcher Launch: [w]eb [m]ail [t]rello [s]lack [g]ithub [b]ank
bindsym $mod+o mode "$mode_launcher"

mode "$mode_launcher" {
    # open chrome
    bindsym w exec google-chrome --new-window --force-device-scale-factor=1.15; mode "default"
    # open email
    bindsym s exec google-chrome --app --new-window --force-device-scale-factor=1.15 https://brandweerrooster.slack.com/messages/general; mode "default"
    bindsym g exec google-chrome --app --new-window --force-device-scale-factor=1.15 https://github.com/rhomeister/brandweerrooster2/; mode "default"

    bindsym Esc mode "default"
    bindsym Return mode "default"
}

# On startup

# setup keyboard
exec_always --no-startup-id "setxkbmap -layout us -variant mac -option nodeadkeys -option ctrl:nocaps"
exec_always xsetroot -solid "#333333" # set background
exec_always xset r rate 200 40 # decrease keyboard repeat delay and increase rate
# exec_always xrandr --dpi 120 # set DPI to make stuff readable

# turn on second monitor if available
exec_always xrandr | grep '^DP-1 connected' && xrandr --output DP-1 --right-of LVDS-1
exec_always xrandr | grep '^HDMI-1 connected' && xrandr --output HDMI-1 --right-of LVDS-1

# ssh stuff?
exec eval $(ssh-agent -s)

# start network manager
exec --no-startup-id nm-applet

# Pulse Audio controls
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +2%; exec pactl set-sink-mute @DEFAULT_SINK@ 0
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -2%; exec pactl set-sink-mute @DEFAULT_SINK@ 0
bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle

# Media player controls
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# Screen Brightness controls
bindsym XF86MonBrightnessUp exec "xbacklight -inc 10; notify-send 'brightness up'"
bindsym XF86MonBrightnessDown exec "xbacklight -dec 10; notify-send 'brightness down'"

# Colors set from ~/.Xresources
set_from_resource   $background  background
set_from_resource   $foreground  foreground
set_from_resource   $color0      color0
set_from_resource   $color1      color1
set_from_resource   $color2      color2
set_from_resource   $color3      color3
set_from_resource   $color4      color4
set_from_resource   $color5      color5
set_from_resource   $color6      color6
set_from_resource   $color7      color7
set_from_resource   $color8      color8
set_from_resource   $color9      color9
set_from_resource   $color10     color10
set_from_resource   $color11     color11
set_from_resource   $color12     color12
set_from_resource   $color13     color13
set_from_resource   $color14     color14
set_from_resource   $color15     color15

# Theme
# Polybar launch script (located ~/.config/polybar/launch.sh) 
exec_always --no-startup-id $HOME/.config/polybar/launch.sh


# hide/unhide i3status bar
bindsym $mod+m bar mode toggle

# Theme colors
# class                 border    backgr.   text      indic.    child_border
# My colors
client.background  $background

client.focused  $foreground  $background  $foreground  $background  $background
client.unfocused  $foreground  $background  $foreground  $background  $background
client.focused_inactive  $foreground  $background  $foreground  $background  $background
client.urgent        $foreground  $background  $foreground  $background  $background
client.placeholder    $foreground  $background  $foreground  $background  $background
